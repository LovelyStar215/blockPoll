<head>
    <title>VoteR</title>
    <h1>Ethereum Voting System</h1>
    <br>
</head>

<body>
{{> WalletBallance}}
{{> findElection}}
{{> vote}}
{{> createElection}}
</body>

<template name="findElection">
    <h1>Find Election On chain</h1>
    <form>
        <input type="text" name="address">
        <input type="submit" value="Search">
    </form>
    <ul>
        <li>
            Number of votes: {{TemplateVar.get "numberOfVotes"}}
        </li>
        <li>
            Number of Candidates: {{TemplateVar.get "numberOfCandidates"}}
        </li>
        <li>
            Starting Block: {{TemplateVar.get "startingBlock"}}
        </li>
        <li>
            Ending Block: {{TemplateVar.get "endingBlock"}}
        </li>
        <li>
            Is Partial: {{TemplateVar.get "isPartial"}}
        </li>
        <li>
            Election Status: {{TemplateVar.get "electionStatus"}}
            {{electionStatus}}
        </li>
        <li>
            Candidates:
            <table>
                <tbody>
                <tr>
                    <th>Candidate</th>
                    <th>Votes</th>
                </tr>
                {{#each objectToPairs candidateMap}}
                    <tr>
                        <td>{{key}}</td>
                        <td>{{value}}</td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </li>
        <li>
            Voters:
            <table>
                <tbody>
                <tr>
                    <th>Voter Address</th>
                    <th>Credits</th>
                </tr>
                {{#each objectToPairs voterMap}}
                    <tr>
                        <td>{{key}}</td>
                        <td>{{value}}</td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </li>
    </ul>
</template>

<template name="WalletBallance">
    <h1>Your Account Info</h1>
    <ul>
        <li>Your Address: {{Address}}</li>
        <li>Your Ether Ballance: {{walletBallance}}</li>
        <li>Connected Network: {{connectedNetwork}}</li>
        <li>Current BlockNumber: {{blockNumber}}</li>
    </ul>
</template>

<template name="vote">
    <h1>Vote in an Election</h1>
    {{#if registeredForElection}}
        You are registered to vote for this election.
        <br>
        You have {{numberOfVotingCredits}} voting credits on your account. You can place a vote below:
        <br>

        <form>
            Pick candidate: <select class="candidates" name="candidate">
        </select>
            <br>
            Pick number of credits: <input type="number" name="credits" min="1" max="{{numberOfVotingCredits}}">
            <br>
            <input type="submit" value="vote">
        </form>

        <br>

    {{else}}
        You are not registered to vote for this election
    {{/if}}
</template>

<template name="createElection">
    <h1>Create a new Election</h1>
    Partial Election: <input type="checkbox" id="partial" name="partial">
    <br>
    Starting Block: <input type="number" id="startingBlock" name="startingBlock" value="{{blockNumber}}"
                           min="{{blockNumber}}">
    <br>
    Ending Block: <input type="number" id="endingBlock" name="EndingBlock" value="{{blockNumber}}"
                         min="{{blockNumber}}">
    <br>
    <h2>Candidates:</h2>
    <table>
        <tr>
            <th>Candidate</th>
            <th></th>
        </tr>
        {{#each candidate in newCandidates}}
            <tr>
                <td>{{candidate}}</td>
                <td>
                    <button type="button" id="{{candidate}}" class="removeCandidate"><i class="fa fa-trash"
                                                                                        aria-hidden="true"></i></button>
                </td>
            </tr>
        {{/each}}
    </table>
    <p>Add new Candidates:
        <input type="text" name="candidateName" placeholder="candidate Name" id="candidateName">
        <button type="button" class="addCandidate" value="Add Candidate"><i class="fa fa-plus" aria-hidden="true"></i>
        </button>
    </p>

    <h2>Voter Roll:</h2>

    <table>
        <tr>
            <th>Name</th>
            <th>Address</th>
            <th>Weight</th>
            <th></th>
        </tr>
        {{#each objectToPairs rollMap}}
            <tr>
                <td>{{value.[1]}}</td>
                <td>{{key}}</td>
                <td>{{value.[0]}}</td>
                <td>
                    <button type="button" name="{{key}}" id="{{key}}" class="removeVoter"><i class="fa fa-trash"
                                                                                             aria-hidden="true"></i>
                    </button>
                </td>
            </tr>
        {{/each}}
    </table>

    <p>Add new voter:
        <br>
        <input type="text" name="voterName" placeholder="Voter Name" class="voterName">
        <input type="text" name="voterAddress" placeholder="Voter Address" class="voterAddress">
        <input type="number" name="voterWeight" placeholder="voter Weight" class="voterWeight" min="0" max="999999">
        <button type="button" id="{{voters}}" class="addVoter"><i class="fa fa-plus" aria-hidden="true"></i>
        </button>
    </p>
    <br>
    <button type="button" class="createElection">Create Election</button>
</template>